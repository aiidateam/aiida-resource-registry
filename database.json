{
    "daint.cscs.ch": {
        "mc": {
            "computer": {
                "computer-configure": {
                    "safe_interval": 60,
                    "proxy_command": "ssh -q -Y {username}@ela.cscs.ch netcat daint.cscs.ch 22"
                },
                "computer-setup": {
                    "label": "{{ label | default('daint-mc') }}",
                    "hostname": "daint.cscs.ch",
                    "description": "Piz Daint supercomputer at CSCS Lugano, Switzerland, multicore partition.",
                    "transport": "core.ssh",
                    "scheduler": "core.slurm",
                    "work_dir": "/scratch/snx3000/{username}/aiida_run/",
                    "shebang": "#!/bin/bash",
                    "mpirun_command": "srun -n {tot_num_mpiprocs}",
                    "mpiprocs_per_machine": 36,
                    "prepend_text": "#SBATCH --partition={{ slurm_partition | default('normal') }}\n#SBATCH --account={{ slurm_account }}\n#SBATCH --constraint=mc\n#SBATCH --cpus-per-task=1\n\nexport OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\nsource $MODULESHOME/init/bash\nulimit -s unlimited",
                    "metadata": {
                        "label": {
                            "description": "A short name to identify the computer",
                            "type": "text",
                            "key_display": "Computer Label"
                        },
                        "slurm_partition": {
                            "description": "The slurm partition to submit jobs to",
                            "type": "list",
                            "options": [
                                "normal",
                                "debug"
                            ],
                            "key_display": "Slurm partition"
                        },
                        "slurm_account": {
                            "description": "The slurm account to submit jobs to",
                            "type": "text",
                            "key_display": "Slurm account"
                        }
                    }
                }
            },
            "codes": {
                "QE-7.2-exe-template": {
                    "label": "{{ code_binary_name }}-7.2",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for daint-mc",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/QuantumESPRESSO/7.2-CrayIntel-21.09/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module load daint-mc\nmodule load QuantumESPRESSO\n",
                    "append_text": "",
                    "metadata": {
                        "code_binary_name": {
                            "key_display": "Code name",
                            "type": "list",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                },
                "cp2k-9.1": {
                    "label": "cp2k-9.1",
                    "description": "CP2K 9.1 compiled by CSCS",
                    "default_calc_job_plugin": "cp2k",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/CP2K/9.1-CrayGNU-21.09/bin/cp2k.psmp",
                    "prepend_text": "module load daint-mc\nmodule load CP2K\n",
                    "append_text": " "
                },
                "pw-7.0": {
                    "label": "pw-7.0",
                    "description": "PW compiled for daint-mc",
                    "default_calc_job_plugin": "quantumespresso.pw",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/QuantumESPRESSO/7.0-CrayIntel-21.09/bin/pw.x",
                    "prepend_text": "module load daint-mc\nmodule load QuantumESPRESSO\n",
                    "append_text": ""
                },
                "QE-7.0-exe-template": {
                    "label": "{{ code_binary_name }}-7.0",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for daint-mc",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/QuantumESPRESSO/7.0-CrayIntel-21.09/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module load daint-mc\nmodule load QuantumESPRESSO\n",
                    "append_text": "",
                    "metadata": {
                        "code_binary_name": {
                            "key_display": "Code name",
                            "type": "list",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                }
            }
        },
        "gpu": {
            "computer": {
                "computer-configure": {
                    "safe_interval": 60,
                    "proxy_command": "ssh -q -Y {username}@ela.cscs.ch netcat daint.cscs.ch 22"
                },
                "computer-setup": {
                    "label": "{{ label | default('daint-gpu') }}",
                    "hostname": "daint.cscs.ch",
                    "description": "Piz Daint supercomputer at CSCS Lugano, Switzerland, using the GPU nodes. HyperThreading is off",
                    "transport": "core.ssh",
                    "scheduler": "core.slurm",
                    "shebang": "#!/bin/bash -l",
                    "mpiprocs_per_machine": 12,
                    "num_cores_per_mpiproc": 1,
                    "queue_name": "normal",
                    "work_dir": "/scratch/snx3000/{username}/aiida/",
                    "mpirun_command": "srun -n {tot_num_mpiprocs}",
                    "prepend_text": "### computer prepend_text start ###\n#SBATCH --partition={{ slurm_partition | default('normal') }}\n#SBATCH --account={{ slurm_account }}\n#SBATCH --constraint=gpu\n#SBATCH --hint=nomultithread\nexport OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\nexport CRAY_CUDA_MPS=1\nulimit -s unlimited\n### computer prepend_text end ###",
                    "metadata": {
                        "label": {
                            "description": "A short name to identify the computer",
                            "type": "text",
                            "key_display": "Computer Label"
                        },
                        "slurm_partition": {
                            "description": "The slurm partition to submit jobs to",
                            "type": "list",
                            "options": [
                                "normal",
                                "debug"
                            ],
                            "key_display": "Slurm partition"
                        },
                        "slurm_account": {
                            "description": "The slurm account to submit jobs to",
                            "type": "text",
                            "key_display": "Slurm account"
                        }
                    }
                }
            },
            "codes": {
                "QE-7.2-exe-template": {
                    "label": "{{ code_binary_name }}-7.2",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for gpu nodes on daint",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/apps/daint/UES/jenkins/7.0.UP03/21.09/daint-gpu/software/QuantumESPRESSO/7.2-CrayNvidia-21.09/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module load daint-gpu\nmodule load QuantumESPRESSO\n",
                    "append_text": " ",
                    "metadata": {
                        "code_binary_name": {
                            "type": "list",
                            "key_display": "Code name",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                },
                "cp2k-9.1": {
                    "label": "cp2k-9.1",
                    "description": "CP2K compiled for daint-gpu",
                    "default_calc_job_plugin": "cp2k",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-gpu/software/CP2K/9.1-CrayGNU-21.09-cuda/bin/cp2k.psmp",
                    "prepend_text": "module load daint-gpu\nmodule load CP2K\n",
                    "append_text": " "
                }
            }
        },
        "default": "mc"
    },
    "merlin.psi.ch": {
        "cpu": {
            "computer": {
                "computer-configure": {
                    "safe_interval": 60
                },
                "computer-setup": {
                    "label": "{{ label | default('merlin-cpu') }}",
                    "hostname": "merlin-l-01.psi.ch",
                    "description": "Merlin6 HPC at PSI.",
                    "transport": "core.ssh",
                    "scheduler": "core.slurm",
                    "work_dir": "/shared-scratch/{username}/aiida_run/",
                    "shebang": "#!/bin/bash",
                    "mpirun_command": "srun -n {tot_num_mpiprocs}",
                    "mpiprocs_per_machine": 44,
                    "prepend_text": "#SBATCH --partition={{ slurm_partition | default('normal') }}\n#SBATCH --account={{ slurm_account }}\n#SBATCH --constraint=mc\n#SBATCH --cpus-per-task=1\n#SBATCH --cluster=merlin6\n#SBATCH --account=merlin\n\n\nexport OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\nulimit -s unlimited",
                    "metadata": {
                        "label": {
                            "description": "A short name to identify the computer",
                            "type": "text",
                            "key_display": "Computer Label"
                        },
                        "slurm_partition": {
                            "description": "The slurm partition to submit jobs to",
                            "type": "list",
                            "options": [
                                "general",
                                "debug"
                            ],
                            "key_display": "Slurm partition"
                        },
                        "slurm_account": {
                            "description": "The slurm account to submit jobs to",
                            "type": "text",
                            "key_display": "Slurm account"
                        }
                    }
                }
            },
            "codes": {
                "QE-7.2-exe-template": {
                    "label": "{{ code_binary_name }}-7.2",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for daint-mc",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/QuantumESPRESSO/7.2-CrayIntel-21.09/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module load daint-mc\nmodule load QuantumESPRESSO\n",
                    "append_text": "",
                    "metadata": {
                        "code_binary_name": {
                            "key_display": "Code name",
                            "type": "list",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                },
                "cp2k-9.1": {
                    "label": "cp2k-9.1",
                    "description": "CP2K 9.1 compiled by CSCS",
                    "default_calc_job_plugin": "cp2k",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-mc/software/CP2K/9.1-CrayGNU-21.09/bin/cp2k.psmp",
                    "prepend_text": "module load daint-mc\nmodule load CP2K\n",
                    "append_text": " "
                },
                "QE-7.0-exe-template": {
                    "label": "{{ code_binary_name }}-7.0",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for daint-mc",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/opt/psi/MPI/qe/7.0/openmpi/4.1.3_slurm/gcc/11.2.0/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module use unstable;\nmodule load gcc/11.2.0 openmpi/4.1.3_slurm\nmodule load qe/7.0\n",
                    "append_text": "",
                    "metadata": {
                        "code_binary_name": {
                            "key_display": "Code name",
                            "type": "list",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                }
            }
        },
        "gpu": {
            "computer": {
                "computer-configure": {
                    "safe_interval": 60,
                    "proxy_command": "ssh -q -Y {username}@ela.cscs.ch netcat daint.cscs.ch 22"
                },
                "computer-setup": {
                    "label": "{{ label | default('daint-gpu') }}",
                    "hostname": "daint.cscs.ch",
                    "description": "Piz Daint supercomputer at CSCS Lugano, Switzerland, using the GPU nodes. HyperThreading is off",
                    "transport": "core.ssh",
                    "scheduler": "core.slurm",
                    "shebang": "#!/bin/bash -l",
                    "mpiprocs_per_machine": 12,
                    "num_cores_per_mpiproc": 1,
                    "queue_name": "normal",
                    "work_dir": "/scratch/snx3000/{username}/aiida/",
                    "mpirun_command": "srun -n {tot_num_mpiprocs}",
                    "prepend_text": "### computer prepend_text start ###\n#SBATCH --partition={{ slurm_partition | default('normal') }}\n#SBATCH --account={{ slurm_account }}\n#SBATCH --constraint=gpu\n#SBATCH --hint=nomultithread\nexport OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\nexport CRAY_CUDA_MPS=1\nulimit -s unlimited\n### computer prepend_text end ###",
                    "metadata": {
                        "label": {
                            "description": "A short name to identify the computer",
                            "type": "text",
                            "key_display": "Computer Label"
                        },
                        "slurm_partition": {
                            "description": "The slurm partition to submit jobs to",
                            "type": "list",
                            "options": [
                                "normal",
                                "debug"
                            ],
                            "key_display": "Slurm partition"
                        },
                        "slurm_account": {
                            "description": "The slurm account to submit jobs to",
                            "type": "text",
                            "key_display": "Slurm account"
                        }
                    }
                }
            },
            "codes": {
                "QE-7.2-exe-template": {
                    "label": "{{ code_binary_name }}-7.2",
                    "description": "The code {{ code_binary_name }} of Quantum ESPRESSO compiled for gpu nodes on daint",
                    "default_calc_job_plugin": "quantumespresso.{{ code_binary_name }}",
                    "filepath_executable": "/apps/daint/UES/jenkins/7.0.UP03/21.09/daint-gpu/software/QuantumESPRESSO/7.2-CrayNvidia-21.09/bin/{{ code_binary_name }}.x",
                    "prepend_text": "module load daint-gpu\nmodule load QuantumESPRESSO\n",
                    "append_text": " ",
                    "metadata": {
                        "code_binary_name": {
                            "type": "list",
                            "key_display": "Code name",
                            "options": [
                                "pw",
                                "ph",
                                "dos",
                                "projwfc"
                            ]
                        }
                    }
                },
                "cp2k-9.1": {
                    "label": "cp2k-9.1",
                    "description": "CP2K compiled for daint-gpu",
                    "default_calc_job_plugin": "cp2k",
                    "filepath_executable": "/apps/dom/UES/jenkins/7.0.UP03/21.09/dom-gpu/software/CP2K/9.1-CrayGNU-21.09-cuda/bin/cp2k.psmp",
                    "prepend_text": "module load daint-gpu\nmodule load CP2K\n",
                    "append_text": " "
                }
            }
        }
    }
}